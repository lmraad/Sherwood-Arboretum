[{"kind":2,"language":"sql","value":"CREATE TABLE SPECIMENS (\r\n  TREE_ID INTEGER PRIMARY KEY,\r\n  LATITUDE DECIMAL,\r\n  LONGITUDE DECIMAL,\r\n  YEAR_ESTABLISHED INTEGER,\r\n  SCIENTIFIC_NAME VARCHAR(128),\r\n  HEIGHT DECIMAL,\r\n  CROWN_WIDTH DECIMAL,\r\n  DBH DECIMAL,\r\n  FOREIGN KEY (SCIENTIFIC_NAME) REFERENCES SPECIES(SCIENTIFIC_NAME)\r\n);\r\n\r\nCREATE TABLE SPECIES (\r\n  SCIENTIFIC_NAME VARCHAR(128) PRIMARY KEY,\r\n  FAMILY VARCHAR(64),\r\n  CONSERVATION_ACT_1992 VARCHAR(64),\r\n  EPBC_ACT_1999 VARCHAR(64),\r\n  AUSTRALIAN VARCHAR(64),\r\n  PERCENTAGE DECIMAL,\r\n  HABITAT TEXT,\r\n  SPECIES_PROFILE TEXT\r\n);\r\n\r\nCREATE TABLE COMMON_NAMES (\r\n  SCIENTIFIC_NAME VARCHAR(128),\r\n  COMMON_NAME VARCHAR(128),\r\n  PRIMARY KEY (SCIENTIFIC_NAME, COMMON_NAME),\r\n  FOREIGN KEY (SCIENTIFIC_NAME) REFERENCES SPECIES(SCIENTIFIC_NAME)\r\n);\r\n\r\nCREATE TABLE DISTRIBUTIONS (\r\n  SCIENTIFIC_NAME VARCHAR(128),\r\n  DISTRIBUTION VARCHAR(128),\r\n  PRIMARY KEY (SCIENTIFIC_NAME, DISTRIBUTION),\r\n  FOREIGN KEY (SCIENTIFIC_NAME) REFERENCES SPECIES(SCIENTIFIC_NAME)\r\n)"},{"kind":2,"language":"sql","value":"SAVE arboretum.db"},{"kind":2,"language":"sql","value":"PRAGMA table_info(COMMON_NAMES)"},{"kind":2,"language":"sql","value":"PRAGMA table_info(SPECIES)"},{"kind":2,"language":"sql","value":"LOAD arboretum.db"},{"kind":2,"language":"sql","value":"SELECT HEIGHT FROM SPECIMENS WHERE SCIENTIFIC_NAME = \"Agathis robusta\" ORDER BY HEIGHT ASC"},{"kind":2,"language":"sql","value":"SELECT MAX(HEIGHT), MIN(HEIGHT), AVG(HEIGHT) FROM SPECIMENS WHERE SCIENTIFIC_NAME = \"Agathis robusta\""},{"kind":2,"language":"sql","value":"CREATE VIEW ALL_DISTRIBUTIONS AS\r\nSELECT SCIENTIFIC_NAME, GROUP_CONCAT(DISTRIBUTION, \", \") AS LOCATIONS FROM DISTRIBUTIONS GROUP BY SCIENTIFIC_NAME"},{"kind":2,"language":"sql","value":"SELECT * FROM ALL_DISTRIBUTIONS"},{"kind":2,"language":"sql","value":"CREATE VIEW SUMMARY AS\r\nSELECT COMMON_NAMES.SCIENTIFIC_NAME, GROUP_CONCAT(COMMON_NAME, \", \") AS NAME, ALL_DISTRIBUTIONS.LOCATIONS\r\nFROM COMMON_NAMES\r\nJOIN ALL_DISTRIBUTIONS ON ALL_DISTRIBUTIONS.SCIENTIFIC_NAME = COMMON_NAMES.SCIENTIFIC_NAME\r\nGROUP BY COMMON_NAMES.SCIENTIFIC_NAME"},{"kind":2,"language":"sql","value":"SELECT * FROM SUMMARY"}]